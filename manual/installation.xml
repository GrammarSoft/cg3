<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter SYSTEM "docbook-dtd-45/docbookx.dtd">

<chapter id="installation">
  <title>Installation &amp; Updating</title>
  <para>
    These guidelines are primarily for Linux, although I develop on Windows
    using Microsoft Visual Studio 2005. These steps will not work under Cygwin,
    but I have successfully compiled and run tests under Windows, Linux, and Mac OS X.
  </para>

  <section id="installing_icu">
    <title>Installing ICU</title>
    <para>
      <ulink url="http://icu-project.org/">International Components for Unicode</ulink> are required to compile and run VISL CG-3.
      Only need to do this once, however it must be done unless you already have a recent
      (newer or equal to <ulink url="http://icu-project.org/">ICU</ulink> 3.6) version installed. <ulink url="http://icu-project.org/">ICU</ulink> 3.4 may also work, but is
      considerably slower. Latest info on <ulink url="http://icu-project.org/">ICU</ulink> can be found at <ulink url="http://icu-project.org/">http://icu-project.org/</ulink>.
      ICU 3.8 has also been tested and works.
    </para>
    <para>
      These steps have been tested on all Red Hat based distributions from RH8 to Fedora 8.
      Similar steps have been tested on Ubuntu 7.10, and Mac OS X 10.3 to 10.5 both PPC and Intel.
      They may vary for your distribution.
    </para>
    <para>
      As root:
      <screen>
        # cd /tmp
        # wget -c --passive
        &nbsp; '<ulink url="http://icu-project.org/download/">ftp://ftp.software.ibm.com/software/globalization/icu/3.6/icu4c-3_6-src.tgz</ulink>'
        # tar -zxvf icu4c-3_6-src.tgz
        # cd icu/source/
        # ./runConfigureICU Linux
        # make
        # make install
        # echo "/usr/local/lib" >> /etc/ld.so.conf
        # ldconfig
      </screen>
    </para>
  </section>

  <section id="compiling_cg3">
    <title>Getting &amp; Compiling VISL CG-3</title>
    <para>
      This step requires you have <ulink url="http://subversion.tigris.org/">Subversion</ulink> installed.
      Subversion binaries are very likely available for your distribution already;
      try using <command>yum install subversion</command> or <command>apt-get install subversion</command> or whichever
      package manager your distribution uses.
    </para>
    <para>
      When there are feature complete releases of VISL CG-3 I will also be making
      proper tarballs of those.
    </para>
    <para>
      As any user in any folder where you can find it again:
      <screen>
        $ svn co --username anonymous --password anonymous
        &nbsp; <ulink url="http://anonymous:anonymous@beta.visl.sdu.dk/svn/visl/tools/vislcg3/">http://beta.visl.sdu.dk/svn/visl/tools/vislcg3</ulink>
        $ cd vislcg3/trunk/
        $ ./compile-linux.sh
        $ ./vislcg3
      </screen>
    </para>
    <para>
      If all went well, it should spit out the usage information.
      After it has been compiled, you can run the regression test suite as <link linkend="regressiontest">described below</link>.
    </para>
    <tip>
      <para>
        For Mac OS X the script is called <command>compile-mac.sh</command> instead of <command>compile-linux.sh</command>.
      </para>
    </tip>
    <note>
      <para>
        If any errors or warnings were output by <command>compile-linux.sh</command>, please contact me;
        I strive to make it compile cleanly on every platform.
      </para>
    </note>
  </section>

  <section id="updating_cg3">
    <title>Updating VISL CG-3</title>
    <para>
      In the same folder you chose above, as the same user:
      <screen>
        $ svn up
        $ ./compile-linux.sh
        $ ./vislcg
      </screen>
    </para>
  </section>

  <section id="regressiontest">
    <title>Regression Testing</title>
    <para>
      After successfully compiling the binary, you can run the regression test suite
      with the command:
      <screen>
        $ ./test/runall.pl
      </screen>
    </para>
    <para>
      This will run a series of tests that should all exit with "Success".
      If a test on your end exits with "Fail", please tar up that tests' folder and
      send it to me alongside any ideas you may have as to why it failed.
    </para>
  </section>
</chapter>
