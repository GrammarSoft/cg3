<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter SYSTEM "docbook-dtd-45/docbookx.dtd">

<chapter id="cgkeywords">
  <title>Constraint Grammar Keywords</title>

  <section id="keyword-add">
    <title>ADD</title>
    <indexterm>
      <primary>ADD</primary>
      <seealso>MAP</seealso>
    </indexterm>
    <para>
      Singles out a reading from the cohort that matches the target, and if all contextual tests are
      satisfied it will add the listed tags to the reading. Unlike MAP it will not block further MAP,
      ADD, or REPLACE rules from operating on the reading.
    </para>
    <screen>
      ADD (tags) targetset (-1* ("someword")) ;
    </screen>
  </section>

  <section id="keyword-after-sections">
    <title>AFTER-SECTIONS</title>
    <indexterm>
      <primary>AFTER-SECTIONS</primary>
    </indexterm>
    <para>
      Same as SECTION, except it is only run a single time per window,
      and only after all normal SECTIONs have run.
    </para>
  </section>

  <section id="keyword-and">
    <title>AND</title>
    <indexterm>
      <primary>AND</primary>
    </indexterm>
    <para>
      <emphasis>Deprecated: use "LINK 0" instead.</emphasis>
      An inline keyword put between contextual tests as shorthand for "LINK 0".
    </para>
  </section>

  <section id="keyword-append">
    <title>APPEND</title>
    <indexterm>
      <primary>APPEND</primary>
    </indexterm>
    <para>
      Singles out a reading from the cohort that matches the target, and if all contextual tests are
      satisfied it will create and append a new reading from the listed tags.
      <emphasis>Since this creates a raw reading you must include a baseform in the tag list.</emphasis>
    </para>
    <screen>
      APPEND ("baseform" tags) targetset (-1* ("someword")) ;
    </screen>
  </section>

  <section id="keyword-barrier">
    <title>BARRIER</title>
    <indexterm>
      <primary>BARRIER</primary>
    </indexterm>
    <para>
      An inline keyword part of a contextual test that will halt a scan if the barrier is encountered.
      Only meaningful in scanning contexts.
    </para>
    <screen>
      SELECT targetset (-1* ("someword") BARRIER (tag)) ;
    </screen>
  </section>

  <section id="keyword-before-sections">
    <title>BEFORE-SECTIONS</title>
    <indexterm>
      <primary>BEFORE-SECTIONS</primary>
    </indexterm>
    <para>
      Same as SECTION, except it is only run a single time per window,
      and only before all normal SECTIONs have run.
    </para>
  </section>

  <section id="keyword-constraints">
    <title>CONSTRAINTS</title>
    <indexterm>
      <primary>CONSTRAINTS</primary>
    </indexterm>
    <para>
      <emphasis>Deprecated: use SECTION instead.</emphasis>
      A section of the grammar that can contain SELECT, REMOVE, and IFF entries.
    </para>
  </section>

  <section id="keyword-corrections">
    <title>CORRECTIONS</title>
    <indexterm>
      <primary>CORRECTIONS</primary>
    </indexterm>
    <para>
      <emphasis>Deprecated: use BEFORE-SECTIONS instead.</emphasis>
      A section of the grammar that can contain APPEND and SUBSTITUTE entries.
    </para>
  </section>

  <section id="keyword-delimit">
    <title>DELIMIT</title>
    <indexterm>
      <primary>DELIMIT</primary>
      <seealso>DELIMITERS</seealso>
    </indexterm>
    <para>
      If it finds a reading which satisfies the target and the contextual tests, DELIMIT will
      cut the disambituation window immediately after the cohort the reading is in. After delimiting
      in this manner, CG-3 will bail out and disambiguate the newly formed window from the start.
      <emphasis>
        This should not be used instead of DELIMITERS unless you know what you are doing.
      </emphasis>
    </para>
    <screen>
      DELIMIT targetset (-1* ("someword")) ;
    </screen>
  </section>

  <section id="keyword-delimiters">
    <title>DELIMITERS</title>
    <indexterm>
      <primary>DELIMITERS</primary>
      <seealso>SOFT-DELIMITERS</seealso>
    </indexterm>
    <para>
      Sets a list of hard delimiters. If one of these are found the disambuation window is cut
      immediately after the cohort it was found in.
      If no delimiters are defined or the window exceeds the hard limit (defaults to 500 cohorts),
      the window will be cut arbitarily.
      Internally, this is converted to the magic set _S_DELIMITERS_.
    </para>
    <screen>
      DELIMITERS = "&lt;$.&gt;" "&lt;$?&gt;" "&lt;$!&gt;" "&lt;$:&gt;" "&lt;$\;&gt;" ;
    </screen>
  </section>

  <section id="keyword-end">
    <title>END</title>
    <indexterm>
      <primary>END</primary>
    </indexterm>
    <para>
      Denotes the end of the grammar. Nothing after this keyword is read.
      <emphasis>
        Deprecated: Remnant from older versions of CG;
        the end of the file will do just fine.
      </emphasis>
    </para>
  </section>

  <section id="keyword-if">
    <title>IF</title>
    <indexterm>
      <primary>IF</primary>
    </indexterm>
    <para>
      <emphasis>Deprecated: has no effect in CG-3.</emphasis>
      An inline keyword put before the first contextual test of a rule.
    </para>
  </section>

  <section id="keyword-iff">
    <title>IFF</title>
    <indexterm>
      <primary>IFF</primary>
    </indexterm>
    <para>
      Singles out a reading from the cohort that matches the target, and if all contextual tests are
      satisfied it will behave as a SELECT rule.
      If the tests are not satisfied it will behave as a REMOVE rule.
    </para>
    <screen>
      IFF targetset (-1* ("someword")) ;
    </screen>
  </section>

  <section id="keyword-link">
    <title>LINK</title>
    <indexterm>
      <primary>LINK</primary>
    </indexterm>
    <para>
      An inline keyword part of a contextual test that will chain to another contextual test
      if the current is satisfied. The chained contextual test will operate from the current position
      in the window, as opposed to the position of the original cohort that initiated the chain.
      The chain can be extended to any depth.
    </para>
    <screen>
      SELECT targetset (-1* ("someword") LINK 3 (tag)) ;
    </screen>
  </section>

  <section id="keyword-list">
    <title>LIST</title>
    <indexterm>
      <primary>LIST</primary>
    </indexterm>
    <para>
      Defines a new set based on a list of tags.
    </para>
    <screen>
      LIST setname = tag othertag (mtag htag) ltag ;
    </screen>
  </section>

  <section id="keyword-map">
    <title>MAP</title>
    <indexterm>
      <primary>MAP</primary>
      <seealso>ADD</seealso>
    </indexterm>
    <para>
      Singles out a reading from the cohort that matches the target, and if all contextual tests are
      satisfied it will add the listed tags to the reading and block further MAP,
      ADD, or REPLACE rules from operating on the reading.
    </para>
    <screen>
      MAP (tags) targetset (-1* ("someword")) ;
    </screen>
  </section>

  <section id="keyword-mappings">
    <title>MAPPINGS</title>
    <indexterm>
      <primary>MAPPINGS</primary>
    </indexterm>
    <para>
      <emphasis>Deprecated: use BEFORE-SECTIONS instead.</emphasis>
      A section of the grammar that can contain MAP, ADD, and REPLACE entries.
    </para>
  </section>

  <section id="keyword-mapping-prefix">
    <title>MAPPING-PREFIX</title>
    <indexterm>
      <primary>MAPPING-PREFIX</primary>
      <seealso>MAP</seealso>
    </indexterm>
    <para>
      Defines the single prefix character that should determine whether a tag is considered a mapping tag
      or not. Defaults to @.
    </para>
    <screen>
      MAPPING-PREFIX = @ ;
    </screen>
  </section>

  <section id="keyword-negate">
    <title>NEGATE</title>
    <indexterm>
      <primary>NEGATE</primary>
      <seealso>NOT</seealso>
    </indexterm>
    <para>
      An inline keyword put at the start of a contextual test to invert the combined result of all
      following contextual tests.
      Similar to, but not the same as, NOT.
    </para>
    <screen>
      SELECT targetset (NEGATE -1* ("someword") LINK NOT 1 (tag)) ;
    </screen>
  </section>

  <section id="keyword-not">
    <title>NOT</title>
    <indexterm>
      <primary>NOT</primary>
      <seealso>NEGATE</seealso>
    </indexterm>
    <para>
      An inline keyword put at the start of a contextual test to invert the result of it.
      Similar to, but not the same as, NEGATE.
    </para>
    <screen>
      SELECT targetset (NEGATE -1* ("someword") LINK NOT 1 (tag)) ;
    </screen>
  </section>

  <section id="keyword-preferred-targets">
    <title>PREFERRED-TARGETS</title>
    <indexterm>
      <primary>PREFERRED-TARGETS</primary>
    </indexterm>
    <para>
      If the preferred targets are defined, this will influence SELECT, REMOVE, and IFF rules.
      Normally, these rules will operate until one reading remains in the cohort.
      If there are preferred targets, these rules are allowed to operate until there are no readings left,
      after which the preferred target list is consulted to find a reading to "bring back from the dead"
      and pass on as the final reading to survive the round.
      <emphasis>
        Due to its nature of defying the rule application order, this is bad voodoo.
        I recommend only using this if you know what you are doing.
      </emphasis>
      <emphasis>This currently has no effect in CG-3, but will in the future.</emphasis>
    </para>
    <screen>
      PREFERRED-TARGETS = tag othertag etctag ;
    </screen>
  </section>

  <section id="keyword-remove">
    <title>REMOVE</title>
    <indexterm>
      <primary>REMOVE</primary>
    </indexterm>
    <para>
      Singles out a reading from the cohort that matches the target, and if all contextual tests are
      satisfied it will delete the mached reading.
    </para>
    <screen>
      REMOVE targetset (-1* ("someword")) ;
    </screen>
  </section>

  <section id="keyword-replace">
    <title>REPLACE</title>
    <indexterm>
      <primary>REPLACE</primary>
      <seealso>SUBSTITUTE</seealso>
    </indexterm>
    <para>
      Singles out a reading from the cohort that matches the target, and if all contextual tests are
      satisfied it will remove all existing tags from the reading, then add the listed tags to the reading
      and block further MAP, ADD, or REPLACE rules from operating on the reading.
    </para>
    <screen>
      REPLACE (tags) targetset (-1* ("someword")) ;
    </screen>
  </section>

  <section id="keyword-section">
    <title>SECTION</title>
    <indexterm>
      <primary>SECTION</primary>
    </indexterm>
    <para>
      A section of the grammar that can contain all types of rule and set definition entries.
    </para>
  </section>

  <section id="keyword-select">
    <title>SELECT</title>
    <indexterm>
      <primary>SELECT</primary>
    </indexterm>
    <para>
      Singles out a reading from the cohort that matches the target, and if all contextual tests are
      satisfied it will delete all other readings except the matched one.
    </para>
    <screen>
      SELECT targetset (-1* ("someword")) ;
    </screen>
  </section>

  <section id="keyword-set">
    <title>SET</title>
    <indexterm>
      <primary>SET</primary>
    </indexterm>
    <para>
      Defines a new set based on operations between existing sets.
    </para>
    <screen>
      SET setname = someset + someotherset - (tag) ;
    </screen>
  </section>

  <section id="keyword-sets">
    <title>SETS</title>
    <indexterm>
      <primary>SETS</primary>
    </indexterm>
    <para>
      <emphasis>Deprecated: has no effect in CG-3.</emphasis>
      A section of the grammar that can contain SET and LIST entries.
    </para>
  </section>

  <section id="keyword-soft-delimiters">
    <title>SOFT-DELIMITERS</title>
    <indexterm>
      <primary>SOFT-DELIMITERS</primary>
      <seealso>DELIMITERS</seealso>
    </indexterm>
    <para>
      Sets a list of soft delimiters. If a disambiguation window is approaching the soft-limit
      (defaults to 300 cohorts), CG-3 will begin to look for a soft delimiter to cut the window after.
      Internally, this is converted to the magic set _S_SOFT_DELIMITERS_.
    </para>
    <screen>
      SOFT-DELIMITERS = "&lt;$,&gt;" ;
    </screen>
  </section>

  <section id="keyword-substitute">
    <title>SUBSTITUTE</title>
    <indexterm>
      <primary>SUBSTITUTE</primary>
      <seealso>REPLACE</seealso>
    </indexterm>
    <para>
      Singles out a reading from the cohort that matches the target, and if all contextual tests are
      satisfied it will remove the tags from the search list, then add the listed tags to the reading.
      <emphasis>
        No guarantee is currently made as to where the replacement tags are inserted, but in the future
        the idea is that the tags will be inserted in place of the last found tag from the search list.
        This is a moot point for CG-3 as the tag order does not matter internally, but external tools may
        expect a specific order.
      </emphasis>
    </para>
    <screen>
      SUBSTITUTE (search tags) (new tags) targetset (-1* ("someword")) ;
    </screen>
  </section>

  <section id="keyword-target">
    <title>TARGET</title>
    <indexterm>
      <primary>TARGET</primary>
    </indexterm>
    <para>
      <emphasis>Deprecated: has no effect in CG-3.</emphasis>
      An inline keyword put before the target of a rule.
    </para>
  </section>

</chapter>
