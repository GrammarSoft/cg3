DELIMITERS = "<$.>" ;

MAPPING-PREFIX = § ;

LIST @ACC = @<ACC @ACC> ;
LIST @PIV = @<PIV @PIV> ;
LIST @P< = @P< ;
LIST N-ANIM = <H> <Hfam> <Hprof> <Hattr> <A> ;
LIST PRP = PRP ;

BEFORE-SECTIONS

ADD (@parent-deep) ("o") (p* ("bater")) ;
ADD (@parent-deep-error) ("o") (p ("bater")) ;

ADD (@child-deep) ("bater") (c* ("o")) ;
ADD (@child-deep-error) ("bater") (c ("o")) ;

ADD (@self-or-child) ("em") (cS (PRP)) ;
ADD (@self-or-child-error) ("em") (c (PRP)) ;

ADD (@self-or-parent) ("em") (pS (PRP)) ;
ADD (@self-or-parent-error) ("em") (p (PRP)) ;

MAP (§DES) TARGET @P< (*-1 PRP LINK 0 ("em") LINK 0 @PIV LINK p ("bater")) (NOT 0 N-ANIM) ;
MAP (§PAT) TARGET @P< (*-1 PRP LINK 0 ("em") LINK p ("bater") LINK NONE c @ACC) ;
MAP (§PAT §EXP) TARGET @ACC (p ("bater")) ;

ADDRELATION (left-child) ("two") FROM (lc ("three")) ;
ADDRELATION (right-child) ("two") FROM (rc ("three")) ;
ADDRELATION (left-ancestor) ("two") FROM (lcc ("three")) ;
ADDRELATION (right-ancestor) ("two") FROM (rcc ("three")) ;
ADDRELATION (leftmost-direct-child) ("two") FROM (llc (*)) ;
ADDRELATION (rightmost-direct-child) ("two") FROM (rrc (*)) ;
ADDRELATION (leftmost-left-direct-child) ("two") FROM (lllc (*)) ;
ADDRELATION (rightmost-right-direct-child) ("two") FROM (rrrc (*)) ;
ADDRELATION (leftmost-deepest-child) ("two") FROM (ll*c (*) LINK NEGATE llc (*)) ;
ADDRELATION (rightmost-deepest-child) ("two") FROM (rr*c (*) LINK NEGATE rrc (*)) ;
ADDRELATION (leftmost-left-deepest-child) ("two") FROM (lll*c (*) LINK NEGATE lllc (*)) ;
ADDRELATION (rightmost-right-deepest-child) ("two") FROM (rrr*c (*) LINK NEGATE rrrc (*)) ;
ADDRELATION (leftmost-ancestor) ("two") FROM (llcc (*)) ;
ADDRELATION (rightmost-ancestor) ("two") FROM (rrcc (*)) ;
ADDRELATION (leftmost-left-ancestor) ("two") FROM (lllcc (*)) ;
ADDRELATION (rightmost-right-ancestor) ("two") FROM (rrrcc (*)) ;
ADDRELATION (leftmost-self-or-ancestor) ("two") FROM (llccS (*)) ;
ADDRELATION (rightmost-self-or-ancestor) ("two") FROM (rrccS (*)) ;
ADDRELATION (leftmost-sibling) ("two") FROM (lls (*)) ;
ADDRELATION (rightmost-sibling) ("two") FROM (rrs (*)) ;
