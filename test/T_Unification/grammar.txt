DELIMITERS = "<$.>" ;

LIST ACESet = AA CC EE ;
LIST BDFSet = BB DD FF ;
LIST Hums = <H.*>r ;
LIST TSet = THIS NOTTHIS ALSONOTTHIS ;
LIST SameBase = ".*"r ;
SET USET = ACESet OR BDFSet ;

BEFORE-SECTIONS
ADD (@UnifSet) &&USET (1 &&USET) ;
ADDRELATIONS (from) (to) ("worda") + $$ACESet TO (1* ("wordc") + $$ACESet) ;

SECTION
SELECT:this $$TSet (-1C (some) + $$TSet) ;
SELECT:one $$ACESet (1 $$ACESet) (2 $$ACESet) ;
SELECT:two $$ACESet + $$BDFSet (1 $$ACESet + $$BDFSet) ;
SELECT:regex $$Hums (1 $$Hums) ;
SELECT:SameBase $$SameBase (1 $$SameBase) ;
REMOVE (NOTTHIS) ;

AFTER-SECTIONS
ADD &&USET (tags) (-7 &&USET) ;
ADD &&USET (tags) (-8 &&USET) ;
ADD $$TSet ("wordh") (-2C (some) + $$TSet) ;
SUBSTITUTE &&USET (<before>) + $$TSet + (<after>) ("wordi") (-8 &&USET) (-2C (some) + $$TSet) ;

LIST REMSET = "word([fgh])"r "WO(RDE)"ri ;
SUBSTITUTE $$REMSET ("replaced:$1"v) $$REMSET ;
